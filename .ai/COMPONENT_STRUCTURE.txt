================================================================================
                    ASTRO RUNNER - COMPONENT STRUCTURE
================================================================================

┌─────────────────────────────────────────────────────────────────────────────┐
│                              PAGES (Astro)                                   │
└─────────────────────────────────────────────────────────────────────────────┘

activities.astro
    │
    ├──> AuthenticatedLayout.astro
    │       ├──> TopBar (client:load)
    │       │       └──> UserMenu
    │       │           └──> [ui] DropdownMenu
    │       │
    │       └──> ActivitiesPageContainer (client:load) [MAIN CONTAINER]
    │               │
    │               ├──> MonthNavigation
    │               │       └──> [ui] Button
    │               │
    │               ├──> MotivationBanner (conditional)
    │               │       └──> [ui] Card, Tooltip
    │               │
    │               ├──> AddActivityButton
    │               │       └──> [ui] Button
    │               │
    │               ├──> ActivityList
    │               │       ├──> ActivityCard
    │               │       │       ├──> [ui] Card, Badge, Button
    │               │       │       └──> lib/utils/date (formatDuration, formatDistance)
    │               │       │
    │               │       ├──> DateHeader
    │               │       │       └──> lib/utils/date (formatActivityDate)
    │               │       │
    │               │       ├──> EmptyState
    │               │       │       └──> [ui] Button
    │               │       │
    │               │       └──> SkeletonLoader
    │               │               └──> [ui] Skeleton, Card
    │               │
    │               ├──> MonthYearPickerModal
    │               │       └──> [ui] Dialog, Button, Label, Select
    │               │
    │               ├──> ActivityFormModal
    │               │       ├──> [ui] Dialog, Button, Input, Label, Select
    │               │       └──> hooks/useActivityForm
    │               │               └──> lib/utils/validation
    │               │
    │               └──> DeleteConfirmationModal
    │                       └──> [ui] AlertDialog
    │
    │               [HOOKS USED]
    │               ├──> hooks/useMonthNavigation
    │               │       └──> lib/utils/date
    │               │
    │               └──> hooks/useActivities
    │                       └──> lib/api/activities.client
    │                               └──> /api/activities (fetch API)


auth/login.astro, auth/register.astro, auth/reset-password.astro
    │
    └──> AuthLayout.astro
            ├──> LoginForm
            │       └──> [ui] Card, Button, Input, Label
            │
            ├──> RegisterForm
            │       └──> [ui] Card, Button, Input, Label
            │
            └──> ResetPasswordForm
                    └──> [ui] Card, Button, Input, Label


┌─────────────────────────────────────────────────────────────────────────────┐
│                          COMPONENT DEPENDENCIES                              │
└─────────────────────────────────────────────────────────────────────────────┘

ActivitiesPageContainer (Root Container)
    │
    ├──> MonthNavigation
    ├──> MotivationBanner
    ├──> AddActivityButton
    ├──> ActivityList
    │       ├──> ActivityCard
    │       ├──> DateHeader
    │       ├──> EmptyState
    │       └──> SkeletonLoader
    ├──> MonthYearPickerModal
    ├──> ActivityFormModal
    └──> DeleteConfirmationModal

TopBar
    └──> UserMenu
            └──> [ui] DropdownMenu


┌─────────────────────────────────────────────────────────────────────────────┐
│                              CUSTOM HOOKS                                    │
└─────────────────────────────────────────────────────────────────────────────┘

hooks/useActivities
    │
    ├──> lib/api/activities.client
    │       └──> /api/activities (REST API)
    │
    └──> lib/utils/date (getMonthRange, toISODate)

hooks/useActivityForm
    │
    ├──> lib/utils/validation (validateActivityForm, hasFormErrors)
    └──> lib/utils/date (iso8601ToDurationInput, metersToKm)

hooks/useMonthNavigation
    └──> lib/utils/date (getCurrentMonthStart)


┌─────────────────────────────────────────────────────────────────────────────┐
│                          UI COMPONENTS (Shadcn/ui)                           │
└─────────────────────────────────────────────────────────────────────────────┘

[ui]/
    ├──> alert-dialog.tsx
    │       └──> @radix-ui/react-alert-dialog
    │
    ├──> badge.tsx
    │       ├──> @radix-ui/react-slot
    │       └──> class-variance-authority
    │
    ├──> button.tsx
    │       ├──> @radix-ui/react-slot
    │       └──> class-variance-authority
    │
    ├──> card.tsx
    │       └──> (pure React)
    │
    ├──> dialog.tsx
    │       └──> @radix-ui/react-dialog
    │
    ├──> dropdown-menu.tsx
    │       └──> @radix-ui/react-dropdown-menu
    │
    ├──> input.tsx
    │       └──> (pure React)
    │
    ├──> label.tsx
    │       └──> @radix-ui/react-label
    │
    ├──> select.tsx
    │       └──> @radix-ui/react-select
    │
    ├──> skeleton.tsx
    │       └──> (pure React)
    │
    └──> tooltip.tsx
            └──> @radix-ui/react-tooltip

All UI components use:
    └──> lib/utils (cn function - clsx + tailwind-merge)


┌─────────────────────────────────────────────────────────────────────────────┐
│                          LIBRARY LAYER                                      │
└─────────────────────────────────────────────────────────────────────────────┘

lib/
    │
    ├──> api/
    │       └──> activities.client.ts
    │               └──> /api/activities (REST endpoints)
    │
    ├──> mappers/
    │       └──> activity.mapper.ts
    │
    ├──> services/
    │       ├──> index.ts
    │       ├──> openrouter.service.ts
    │       ├──> openrouter.types.ts
    │       ├──> openrouter.errors.ts
    │       ├──> openrouter.fallback.ts
    │       └──> activity.service.ts
    │
    └──> utils/
            ├──> activity-stats.ts
            ├──> date.ts
            ├──> validation.ts
            └──> utils.ts (cn function)


┌─────────────────────────────────────────────────────────────────────────────┐
│                          EXTERNAL DEPENDENCIES                               │
└─────────────────────────────────────────────────────────────────────────────┘

CORE FRAMEWORK
    ├──> astro (^5.13.7)
    ├──> react (^19.1.1)
    ├──> react-dom (^19.1.1)
    └──> typescript (^5)

UI FRAMEWORK
    ├──> tailwindcss (^4.1.13)
    ├──> @tailwindcss/vite (^4.1.13)
    └──> class-variance-authority (^0.7.1)

RADIX UI PRIMITIVES
    ├──> @radix-ui/react-alert-dialog (^1.1.15)
    ├──> @radix-ui/react-dialog (^1.1.15)
    ├──> @radix-ui/react-dropdown-menu (^2.1.16)
    ├──> @radix-ui/react-label (^2.1.8)
    ├──> @radix-ui/react-select (^2.2.6)
    ├──> @radix-ui/react-slot (^1.2.4)
    └──> @radix-ui/react-tooltip (^1.1.5)

UTILITIES
    ├──> clsx (^2.1.1)
    ├──> tailwind-merge (^3.4.0)
    ├──> lucide-react (^0.487.0) [Icons]
    └──> zod (^3.23.8) [Validation]

BACKEND/DATABASE
    ├──> @supabase/supabase-js (^2.84.0)
    └──> @supabase/ssr (^0.7.0)

ASTRO INTEGRATIONS
    ├──> @astrojs/node (^9.4.3)
    ├──> @astrojs/react (^4.3.1)
    └──> @astrojs/sitemap (^3.5.1)


┌─────────────────────────────────────────────────────────────────────────────┐
│                          DEV DEPENDENCIES                                    │
└─────────────────────────────────────────────────────────────────────────────┘

TESTING
    ├──> vitest (^4.0.13)
    ├──> @vitest/ui (^4.0.13)
    ├──> @testing-library/react (^16.3.0)
    ├──> @testing-library/jest-dom (^6.9.1)
    ├──> @testing-library/user-event (^14.6.1)
    ├──> @playwright/test (^1.56.1)
    ├──> happy-dom (^20.0.10)
    ├──> jsdom (^27.2.0)
    └──> msw (^2.12.3) [Mock Service Worker]

LINTING/FORMATTING
    ├──> eslint (9.23.0)
    ├──> @typescript-eslint/parser (8.28.0)
    ├──> @typescript-eslint/eslint-plugin (8.28.0)
    ├──> eslint-plugin-astro (1.3.1)
    ├──> eslint-plugin-react (7.37.4)
    ├──> eslint-plugin-react-hooks (5.2.0)
    ├──> eslint-plugin-react-compiler (19.0.0-beta)
    ├──> prettier-plugin-astro (0.14.1)
    └──> eslint-config-prettier (10.1.1)

TOOLS
    ├──> husky (9.1.7)
    ├──> lint-staged (15.5.0)
    └──> supabase (^2.53.6)


┌─────────────────────────────────────────────────────────────────────────────┐
│                          DATA FLOW                                           │
└─────────────────────────────────────────────────────────────────────────────┘

USER INTERACTION
    │
    └──> ActivitiesPageContainer
            │
            ├──> [State Management]
            │       ├──> useMonthNavigation (month selection)
            │       └──> useActivities (activities data + CRUD)
            │
            └──> [API Calls]
                    └──> lib/api/activities.client
                            └──> /api/activities/* (Astro API routes)
                                    └──> Supabase Database


┌─────────────────────────────────────────────────────────────────────────────┐
│                          TYPE SYSTEM                                         │
└─────────────────────────────────────────────────────────────────────────────┘

types.ts (Shared Types)
    ├──> ActivityDto
    ├──> CreateActivityCommand
    ├──> ReplaceActivityCommand
    ├──> ActivitiesListQuery
    ├──> AuthUserBasicDto
    └──> DistanceUnit

frontend-types.ts
    ├──> ActivityFormState
    └──> ActivityFormErrors

database.types.ts (Supabase generated)
    └──> Database schema types


┌─────────────────────────────────────────────────────────────────────────────┐
│                          API ROUTES (Astro)                                  │
└─────────────────────────────────────────────────────────────────────────────┘

pages/api/
    ├──> activities/
    │       ├──> index.ts (GET, POST)
    │       └──> [id].ts (GET, PUT, PATCH, DELETE)
    │
    └──> motivation/
            └──> generate.ts (POST)


┌─────────────────────────────────────────────────────────────────────────────┐
│                          MIDDLEWARE                                          │
└─────────────────────────────────────────────────────────────────────────────┘

middleware/index.ts
    └──> Authentication & Supabase client setup


================================================================================
                              END OF STRUCTURE
================================================================================

