---
import AuthenticatedLayout from "@/layouts/AuthenticatedLayout.astro";
import { TopBar } from "@/components/TopBar";
import { ActivitiesPageContainer } from "@/components/ActivitiesPageContainer";
import type { AuthUserBasicDto } from "@/types";
import { DEFAULT_USER_ID } from "@/db/supabase.client";

// Disable prerendering for this page (SSR)
export const prerender = false;

// TODO: Replace with actual authentication when implemented
// For now, use default test user
const user: AuthUserBasicDto = {
  userId: DEFAULT_USER_ID,
  email: "test@example.com",
};

// TODO: Fetch user's preferred distance unit from profile
// For now, default to km
const distanceUnit = "km";
---

<AuthenticatedLayout title="Activities - Activity Logger" user={user}>
  <!-- TopBar mounted in nav slot -->
  <TopBar client:load user={user} />

  <!-- Main page container with all components -->
  <ActivitiesPageContainer client:load user={user} distanceUnit={distanceUnit} />
</AuthenticatedLayout>
